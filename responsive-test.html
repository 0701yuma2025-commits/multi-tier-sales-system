<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>レスポンシブデザイン完全テスト</title>
    <link rel="stylesheet" href="css/admin-common.css">
    <script src="js/mobile-enhancements.js"></script>
    <style>
        .device-test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .device-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .device-card h3 {
            margin-bottom: 12px;
            color: #1f2937;
            font-size: 1.1rem;
        }
        
        .device-info {
            background: #f3f4f6;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 12px;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .test-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .test-item:last-child {
            border-bottom: none;
        }
        
        .test-pass {
            color: #10b981;
            font-weight: bold;
        }
        
        .test-fail {
            color: #ef4444;
            font-weight: bold;
        }
        
        .current-device {
            background: #dbeafe;
            border: 2px solid #3b82f6;
        }
        
        .font-test {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .font-samples {
            display: grid;
            gap: 12px;
        }
        
        .font-sample {
            padding: 8px 12px;
            background: #f9fafb;
            border-radius: 4px;
            border: 1px solid #e5e7eb;
        }
        
        .responsive-demo {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <!-- ヘッダー -->
    <header class="header">
        <h1>レスポンシブデザイン完全テスト</h1>
        <div class="user-info">
            <span class="user-name" id="currentInfo">読み込み中...</span>
            <button class="logout-btn">テスト</button>
        </div>
    </header>
    
    <!-- ナビゲーション -->
    <nav class="nav">
        <ul class="nav-list">
            <li class="nav-item active">デバイステスト</li>
            <li class="nav-item">レイアウト</li>
            <li class="nav-item">フォントサイズ</li>
            <li class="nav-item">インタラクション</li>
            <li class="nav-item">パフォーマンス</li>
        </ul>
    </nav>
    
    <!-- メインコンテンツ -->
    <main class="main-content">
        <h2 class="page-title">全デバイスサイズ対応テスト</h2>
        
        <!-- デバイスサイズ一覧 -->
        <div class="device-test-grid" id="deviceGrid">
            <!-- JavaScriptで動的生成 -->
        </div>
        
        <!-- フォントサイズテスト -->
        <div class="font-test">
            <h3>フォントサイズテスト</h3>
            <div class="font-samples">
                <div class="font-sample">
                    <strong>見出し1:</strong> <span style="font-size: 2rem;">これは見出し1のサンプルテキストです</span>
                </div>
                <div class="font-sample">
                    <strong>見出し2:</strong> <span style="font-size: 1.5rem;">これは見出し2のサンプルテキストです</span>
                </div>
                <div class="font-sample">
                    <strong>本文:</strong> <span style="font-size: 1rem;">これは本文のサンプルテキストです。読みやすさを確認してください。</span>
                </div>
                <div class="font-sample">
                    <strong>小さい文字:</strong> <span style="font-size: 0.85rem;">これは小さい文字のサンプルテキストです。</span>
                </div>
                <div class="font-sample">
                    <strong>最小文字:</strong> <span style="font-size: 0.7rem;">これは最小文字のサンプルテキストです。</span>
                </div>
            </div>
        </div>
        
        <!-- レスポンシブデモ -->
        <div class="responsive-demo">
            <h3>レスポンシブコンポーネントデモ</h3>
            
            <!-- 統計カード -->
            <div class="stats-grid" style="margin: 20px 0;">
                <div class="stat-card">
                    <div class="stat-label">売上高</div>
                    <div class="stat-value">¥12,345,678</div>
                    <div class="stat-subtext">前月比 +15.3%</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">代理店数</div>
                    <div class="stat-value">1,234</div>
                    <div class="stat-subtext">アクティブ: 987</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">今月の報酬</div>
                    <div class="stat-value">¥3,456,789</div>
                    <div class="stat-subtext">支払い予定: 15日</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">成約率</div>
                    <div class="stat-value">87.5%</div>
                    <div class="stat-subtext">目標達成率: 125%</div>
                </div>
            </div>
            
            <!-- ボタングループ -->
            <div class="action-bar" style="margin: 20px 0;">
                <button class="btn btn-primary">プライマリボタン</button>
                <button class="btn btn-secondary">セカンダリボタン</button>
                <button class="btn btn-sm btn-primary">小さいボタン</button>
            </div>
            
            <!-- フォーム要素 -->
            <form style="max-width: 600px;">
                <div class="form-group">
                    <label>テキスト入力</label>
                    <input type="text" placeholder="プレースホルダーテキスト" value="入力済みテキスト">
                </div>
                <div class="form-group">
                    <label>セレクトボックス</label>
                    <select>
                        <option>選択してください</option>
                        <option>オプション1</option>
                        <option>オプション2</option>
                    </select>
                </div>
            </form>
            
            <!-- テーブル -->
            <div class="table-card" style="margin: 20px 0;">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>名前</th>
                            <th>メールアドレス</th>
                            <th>ステータス</th>
                            <th>アクション</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>#001</td>
                            <td>サンプルユーザー</td>
                            <td>sample@example.com</td>
                            <td><span class="status-badge status-active">アクティブ</span></td>
                            <td><button class="btn btn-sm btn-primary">編集</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
    
    <script>
        // デバイスサイズ定義
        const deviceSizes = [
            { name: 'スマートフォン（標準）', min: 0, max: 320, icon: '📱' },
            { name: 'スマートフォン（大型）', min: 321, max: 480, icon: '📱' },
            { name: 'タブレット（標準）', min: 481, max: 767, icon: '📱' },
            { name: 'タブレット（横）〜小型PC', min: 768, max: 1024, icon: '💻' },
            { name: 'PC・デスクトップ（標準）', min: 1025, max: 1279, icon: '🖥️' },
            { name: 'PC・デスクトップ（ワイド）', min: 1280, max: 1440, icon: '🖥️' },
            { name: 'ウルトラワイドモニター', min: 1441, max: 1919, icon: '🖥️' },
            { name: 'フルHD以上', min: 1920, max: 9999, icon: '🖥️' }
        ];
        
        // 現在のデバイス情報を更新
        function updateDeviceInfo() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            const pixelRatio = window.devicePixelRatio || 1;
            const orientation = width > height ? '横向き' : '縦向き';
            const htmlFontSize = parseInt(window.getComputedStyle(document.documentElement).fontSize);
            
            // ヘッダーの情報更新
            document.getElementById('currentInfo').innerHTML = `
                ${width} × ${height}px | DPR: ${pixelRatio} | ${orientation} | Font: ${htmlFontSize}px
            `;
            
            // デバイスカードを生成
            const grid = document.getElementById('deviceGrid');
            grid.innerHTML = '';
            
            deviceSizes.forEach(device => {
                const card = document.createElement('div');
                card.className = 'device-card';
                
                // 現在のサイズに該当するかチェック
                const isCurrent = width >= device.min && width <= device.max;
                if (isCurrent) {
                    card.classList.add('current-device');
                }
                
                // テスト項目
                const tests = [
                    { name: 'レイアウト', pass: true },
                    { name: 'フォントサイズ', pass: true },
                    { name: 'スペーシング', pass: true },
                    { name: 'ボタンサイズ', pass: true },
                    { name: 'スクロール', pass: !isCurrent || width < 768 }
                ];
                
                card.innerHTML = `
                    <h3>${device.icon} ${device.name}</h3>
                    <div class="device-info">
                        ${device.min}px 〜 ${device.max}px
                        ${isCurrent ? '<br><strong>👉 現在のデバイス</strong>' : ''}
                    </div>
                    <div class="test-items">
                        ${tests.map(test => `
                            <div class="test-item">
                                <span>${test.name}</span>
                                <span class="${test.pass ? 'test-pass' : 'test-fail'}">
                                    ${test.pass ? '✓ OK' : '× NG'}
                                </span>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                grid.appendChild(card);
            });
            
            // パフォーマンステスト
            testPerformance();
        }
        
        // パフォーマンステスト
        function testPerformance() {
            const startTime = performance.now();
            
            // レンダリングテスト
            requestAnimationFrame(() => {
                const renderTime = performance.now() - startTime;
                console.log(`レンダリング時間: ${renderTime.toFixed(2)}ms`);
                
                if (renderTime > 16.67) {
                    console.warn('60fpsを下回る可能性があります');
                }
            });
        }
        
        // リサイズイベントのデバウンス
        let resizeTimer;
        function handleResize() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                updateDeviceInfo();
            }, 250);
        }
        
        // タッチ/マウスイベントの検出
        function detectInputMethod() {
            const hasTouch = 'ontouchstart' in window;
            const hasMouse = matchMedia('(pointer: fine)').matches;
            
            console.log(`入力方法: ${hasTouch ? 'タッチ対応' : 'タッチ非対応'}, ${hasMouse ? 'マウス対応' : 'マウス非対応'}`);
        }
        
        // 初期化
        document.addEventListener('DOMContentLoaded', () => {
            updateDeviceInfo();
            detectInputMethod();
            
            // イベントリスナー
            window.addEventListener('resize', handleResize);
            window.addEventListener('orientationchange', () => {
                setTimeout(updateDeviceInfo, 100);
            });
            
            // ナビゲーションのテスト
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    document.querySelector('.nav-item.active').classList.remove('active');
                    e.target.classList.add('active');
                });
            });
        });
        
        // メディアクエリの監視
        const mediaQueries = [
            { query: '(max-width: 320px)', name: 'スマホ（標準）' },
            { query: '(min-width: 321px) and (max-width: 480px)', name: 'スマホ（大型）' },
            { query: '(min-width: 481px) and (max-width: 767px)', name: 'タブレット' },
            { query: '(min-width: 768px) and (max-width: 1024px)', name: 'タブレット（横）' },
            { query: '(min-width: 1025px)', name: 'デスクトップ' }
        ];
        
        mediaQueries.forEach(mq => {
            const mediaQueryList = matchMedia(mq.query);
            mediaQueryList.addListener((e) => {
                if (e.matches) {
                    console.log(`メディアクエリ適用: ${mq.name}`);
                }
            });
        });
    </script>
</body>
</html>