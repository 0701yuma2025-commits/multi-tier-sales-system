<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å£²ä¸Šç™»éŒ²ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 20px;
            background-color: #f3f4f6;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #1f2937;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f9fafb;
            border-radius: 6px;
        }
        .test-title {
            font-weight: bold;
            color: #4b5563;
            margin-bottom: 15px;
            font-size: 18px;
        }
        .test-case {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 4px;
            border-left: 4px solid #3b82f6;
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
        }
        .success {
            background-color: #d1fae5;
            color: #065f46;
        }
        .error {
            background-color: #fee2e2;
            color: #991b1b;
        }
        .warning {
            background-color: #fef3c7;
            color: #92400e;
        }
        button {
            padding: 10px 20px;
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 10px;
        }
        button:hover {
            background-color: #2563eb;
        }
        .code-block {
            background: #1f2937;
            color: #e5e7eb;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 13px;
            overflow-x: auto;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª å£²ä¸Šç™»éŒ²æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</h1>
        
        <div class="test-section">
            <div class="test-title">1. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ</div>
            
            <div class="test-case">
                <strong>ãƒ†ã‚¹ãƒˆ: æœªæ¥æ—¥ä»˜ã®æ¤œè¨¼</strong>
                <button onclick="testFutureDate()">å®Ÿè¡Œ</button>
                <div id="test1-result"></div>
            </div>
            
            <div class="test-case">
                <strong>ãƒ†ã‚¹ãƒˆ: å¿…é ˆé …ç›®ã®æ¤œè¨¼</strong>
                <button onclick="testRequiredFields()">å®Ÿè¡Œ</button>
                <div id="test2-result"></div>
            </div>
            
            <div class="test-case">
                <strong>ãƒ†ã‚¹ãƒˆ: é‡‘é¡ã®å¦¥å½“æ€§æ¤œè¨¼</strong>
                <button onclick="testAmountValidation()">å®Ÿè¡Œ</button>
                <div id="test3-result"></div>
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">2. æ­£å¸¸ç³»ãƒ†ã‚¹ãƒˆ</div>
            
            <div class="test-case">
                <strong>ãƒ†ã‚¹ãƒˆ: æ­£å¸¸ãªå£²ä¸Šç™»éŒ²ï¼ˆãƒ‡ãƒ¢ãƒ¢ãƒ¼ãƒ‰ï¼‰</strong>
                <button onclick="testNormalRegistration()">å®Ÿè¡Œ</button>
                <div id="test4-result"></div>
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ</div>
            
            <div class="test-case">
                <strong>ãƒ†ã‚¹ãƒˆ: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</strong>
                <button onclick="testNetworkError()">å®Ÿè¡Œ</button>
                <div id="test5-result"></div>
            </div>
        </div>
        
        <div class="test-section">
            <div class="test-title">ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼</div>
            <div id="summary" class="test-result warning">
                ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„
            </div>
        </div>
    </div>
    
    <script>
        let testResults = {
            passed: 0,
            failed: 0,
            total: 5
        };
        
        // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°ã®ãƒ¢ãƒƒã‚¯
        function validateSalesData(salesData) {
            const errors = [];
            
            // æ—¥ä»˜ãƒã‚§ãƒƒã‚¯
            const saleDate = new Date(salesData.date);
            const today = new Date();
            today.setHours(23, 59, 59, 999);
            
            if (saleDate > today) {
                errors.push('å£²ä¸Šæ—¥ã¯æœªæ¥ã®æ—¥ä»˜ã«ã§ãã¾ã›ã‚“');
            }
            
            // å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯
            if (!salesData.agencyId || !salesData.product || !salesData.customerName) {
                errors.push('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
            }
            
            // é‡‘é¡ãƒã‚§ãƒƒã‚¯
            if (salesData.amount <= 0) {
                errors.push('é‡‘é¡ã¯0ã‚ˆã‚Šå¤§ãã„å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
            }
            
            return errors;
        }
        
        // ãƒ†ã‚¹ãƒˆ1: æœªæ¥æ—¥ä»˜
        function testFutureDate() {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            const salesData = {
                date: tomorrow.toISOString().split('T')[0],
                agencyId: '001',
                product: 'PRD001',
                customerName: 'ãƒ†ã‚¹ãƒˆé¡§å®¢',
                amount: 100000
            };
            
            const errors = validateSalesData(salesData);
            const resultDiv = document.getElementById('test1-result');
            
            if (errors.includes('å£²ä¸Šæ—¥ã¯æœªæ¥ã®æ—¥ä»˜ã«ã§ãã¾ã›ã‚“')) {
                resultDiv.className = 'test-result success';
                resultDiv.innerHTML = 'âœ… æˆåŠŸ: æœªæ¥æ—¥ä»˜ãŒæ­£ã—ãæ¤œå‡ºã•ã‚Œã¾ã—ãŸ';
                updateTestResult(true);
            } else {
                resultDiv.className = 'test-result error';
                resultDiv.innerHTML = 'âŒ å¤±æ•—: æœªæ¥æ—¥ä»˜ã®æ¤œè¨¼ãŒæ©Ÿèƒ½ã—ã¦ã„ã¾ã›ã‚“';
                updateTestResult(false);
            }
        }
        
        // ãƒ†ã‚¹ãƒˆ2: å¿…é ˆé …ç›®
        function testRequiredFields() {
            const salesData = {
                date: new Date().toISOString().split('T')[0],
                agencyId: '',
                product: '',
                customerName: '',
                amount: 100000
            };
            
            const errors = validateSalesData(salesData);
            const resultDiv = document.getElementById('test2-result');
            
            if (errors.includes('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')) {
                resultDiv.className = 'test-result success';
                resultDiv.innerHTML = 'âœ… æˆåŠŸ: å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯ãŒæ­£ã—ãæ©Ÿèƒ½ã—ã¦ã„ã¾ã™';
                updateTestResult(true);
            } else {
                resultDiv.className = 'test-result error';
                resultDiv.innerHTML = 'âŒ å¤±æ•—: å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯ãŒæ©Ÿèƒ½ã—ã¦ã„ã¾ã›ã‚“';
                updateTestResult(false);
            }
        }
        
        // ãƒ†ã‚¹ãƒˆ3: é‡‘é¡æ¤œè¨¼
        function testAmountValidation() {
            const salesData = {
                date: new Date().toISOString().split('T')[0],
                agencyId: '001',
                product: 'PRD001',
                customerName: 'ãƒ†ã‚¹ãƒˆé¡§å®¢',
                amount: -1000
            };
            
            const errors = validateSalesData(salesData);
            const resultDiv = document.getElementById('test3-result');
            
            if (errors.includes('é‡‘é¡ã¯0ã‚ˆã‚Šå¤§ãã„å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')) {
                resultDiv.className = 'test-result success';
                resultDiv.innerHTML = 'âœ… æˆåŠŸ: é‡‘é¡ãƒã‚§ãƒƒã‚¯ãŒæ­£ã—ãæ©Ÿèƒ½ã—ã¦ã„ã¾ã™';
                updateTestResult(true);
            } else {
                resultDiv.className = 'test-result error';
                resultDiv.innerHTML = 'âŒ å¤±æ•—: é‡‘é¡ãƒã‚§ãƒƒã‚¯ãŒæ©Ÿèƒ½ã—ã¦ã„ã¾ã›ã‚“';
                updateTestResult(false);
            }
        }
        
        // ãƒ†ã‚¹ãƒˆ4: æ­£å¸¸ç³»
        function testNormalRegistration() {
            const salesData = {
                date: new Date().toISOString().split('T')[0],
                agencyId: '001',
                product: 'PRD001',
                customerName: 'ãƒ†ã‚¹ãƒˆé¡§å®¢',
                amount: 100000
            };
            
            const errors = validateSalesData(salesData);
            const resultDiv = document.getElementById('test4-result');
            
            if (errors.length === 0) {
                resultDiv.className = 'test-result success';
                resultDiv.innerHTML = 'âœ… æˆåŠŸ: æ­£å¸¸ãªãƒ‡ãƒ¼ã‚¿ãŒå—ã‘å…¥ã‚Œã‚‰ã‚Œã¾ã—ãŸ<br>' +
                    '<div class="code-block">' + JSON.stringify(salesData, null, 2) + '</div>';
                updateTestResult(true);
            } else {
                resultDiv.className = 'test-result error';
                resultDiv.innerHTML = 'âŒ å¤±æ•—: æ­£å¸¸ãªãƒ‡ãƒ¼ã‚¿ãŒæ‹’å¦ã•ã‚Œã¾ã—ãŸ: ' + errors.join(', ');
                updateTestResult(false);
            }
        }
        
        // ãƒ†ã‚¹ãƒˆ5: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
        function testNetworkError() {
            // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
            const error = new Error('Network request failed');
            let errorMessage = '';
            
            if (error.message.includes('network') || error.message.includes('Network')) {
                errorMessage = 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„';
            }
            
            const resultDiv = document.getElementById('test5-result');
            
            if (errorMessage.includes('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼')) {
                resultDiv.className = 'test-result success';
                resultDiv.innerHTML = 'âœ… æˆåŠŸ: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒé©åˆ‡ã«å‡¦ç†ã•ã‚Œã¾ã—ãŸ<br>' +
                    'ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: ' + errorMessage;
                updateTestResult(true);
            } else {
                resultDiv.className = 'test-result error';
                resultDiv.innerHTML = 'âŒ å¤±æ•—: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒä¸é©åˆ‡ã§ã™';
                updateTestResult(false);
            }
        }
        
        // ãƒ†ã‚¹ãƒˆçµæœã®æ›´æ–°
        function updateTestResult(passed) {
            if (passed) {
                testResults.passed++;
            } else {
                testResults.failed++;
            }
            
            const summary = document.getElementById('summary');
            const percentage = Math.round((testResults.passed / testResults.total) * 100);
            
            if (testResults.passed + testResults.failed === testResults.total) {
                if (testResults.passed === testResults.total) {
                    summary.className = 'test-result success';
                    summary.innerHTML = `ğŸ‰ å…¨ãƒ†ã‚¹ãƒˆåˆæ ¼ï¼ (${testResults.passed}/${testResults.total})`;
                } else {
                    summary.className = 'test-result error';
                    summary.innerHTML = `âš ï¸ ãƒ†ã‚¹ãƒˆçµæœ: ${testResults.passed}/${testResults.total} åˆæ ¼ (${percentage}%)`;
                }
            } else {
                summary.innerHTML = `å®Ÿè¡Œä¸­: ${testResults.passed + testResults.failed}/${testResults.total} å®Œäº†`;
            }
        }
    </script>
</body>
</html>